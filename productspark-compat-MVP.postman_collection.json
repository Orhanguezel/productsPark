{
  "info": {
    "name": "productspark-compat-MVP",
    "_postman_id": "675fb059-ccdb-4f6e-acfe-33a4c82cfec6",
    "description": "Supabase-compatible backend (MariaDB) — MVP collection",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080"
    },
    {
      "key": "bearer_token",
      "value": ""
    },
    {
      "key": "email",
      "value": "user@example.com"
    },
    {
      "key": "password",
      "value": "P@ssw0rd1"
    }
  ],
  "item": [
    {
      "name": "Auth — Signup",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/auth/v1/signup",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "auth",
            "v1",
            "signup"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\"email\": \"{{email}}\", \"password\": \"{{password}}\", \"data\": {\"role\": \"user\"}}"
        }
      }
    },
    {
      "name": "Auth — Token (password)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/auth/v1/token?grant_type=password",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "auth",
            "v1",
            "token"
          ],
          "query": [
            {
              "key": "grant_type",
              "value": "password"
            }
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\"email\": \"{{email}}\", \"password\": \"{{password}}\"}"
        }
      }
    },
    {
      "name": "Auth — Me (user)",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{bearer_token}}"
          }
        ],
        "url": {
          "raw": "{{base_url}}/auth/v1/user",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "auth",
            "v1",
            "user"
          ]
        }
      }
    },
    {
      "name": "REST — site_settings (maybeSingle)",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Prefer",
            "value": "count=exact"
          }
        ],
        "url": {
          "raw": "{{base_url}}/rest/v1/site_settings?key=eq.home_header_top_text&select=value",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "rest",
            "v1",
            "site_settings"
          ],
          "query": [
            {
              "key": "key",
              "value": "eq.home_header_top_text"
            },
            {
              "key": "select",
              "value": "value"
            }
          ]
        }
      }
    },
    {
      "name": "REST — categories (featured, limit=1)",
      "request": {
        "method": "GET",
        "url": {
          "raw": "{{base_url}}/rest/v1/categories?is_featured=eq.true&limit=1&select=id,name,slug,image_url,icon,description",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "rest",
            "v1",
            "categories"
          ],
          "query": [
            {
              "key": "is_featured",
              "value": "eq.true"
            },
            {
              "key": "limit",
              "value": "1"
            },
            {
              "key": "select",
              "value": "id,name,slug,image_url,icon,description"
            }
          ]
        }
      }
    },
    {
      "name": "REST — cart_items (insert + return=representation)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{bearer_token}}"
          },
          {
            "key": "Prefer",
            "value": "return=representation"
          },
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/rest/v1/cart_items",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "rest",
            "v1",
            "cart_items"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "[{\"user_id\": 1, \"product_id\": 1, \"qty\": 2}]"
        }
      }
    },
    {
      "name": "Functions — paytr-get-token",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "url": {
          "raw": "{{base_url}}/functions/v1/paytr-get-token",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "functions",
            "v1",
            "paytr-get-token"
          ]
        },
        "body": {
          "mode": "raw",
          "raw": "{\"email\": \"{{email}}\", \"payment_amount\": 4990, \"basket\": [[\"Ürün\", \"49.90\", 1]], \"merchant_oid\": \"OID123\", \"user_ip\": \"127.0.0.1\", \"installment\": 0, \"no_installment\": 0, \"max_installment\": 0, \"currency\": \"TL\", \"lang\": \"tr\"}"
        }
      }
    },
    {
      "name": "Storage — upload (product-images)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{bearer_token}}"
          }
        ],
        "url": {
          "raw": "{{base_url}}/storage/v1/object/product-images/2025/10/test.jpg",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "storage",
            "v1",
            "object",
            "product-images",
            "2025",
            "10",
            "test.jpg"
          ]
        },
        "body": {
          "mode": "formdata",
          "formdata": [
            {
              "key": "file",
              "type": "file",
              "src": ""
            }
          ]
        }
      }
    }
  ]
}